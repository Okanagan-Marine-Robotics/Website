---
import Layout from "~/layouts/PageLayout.astro";
import HeroText from "~/components/widgets/HeroText.astro";
import ContactUs from "~/components/widgets/Contact.astro";
import Features2 from "~/components/widgets/Features2.astro";
const metadata = {
  title: "Contact",
};

const serviceKey = import.meta.env.VITE_SERVICE_KEY;
const templateKey = import.meta.env.VITE_JOIN_TEMPLATE_KEY;
const publicKey = import.meta.env.VITE_PUBLIC_KEY;
---

<script
  is:inline
  type="text/javascript"
  src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"
></script>
<script is:inline define:vars={{ serviceKey, templateKey, publicKey }}>
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("form");
    const messageSentElement = document.getElementById("message-sent");

    if (form) {
      form.addEventListener("submit", (event) => {
        event.preventDefault();
        console.log("Form submitted");

        console.log(serviceKey, templateKey, publicKey);
        console.log(form);

        emailjs.sendForm(serviceKey, templateKey, form).then(
          (result) => {
            console.log(result.text);
            form.reset();
            messageSentElement.style.display = "block";
          },
          (error) => {
            console.log("Error sending email");
            console.log(error.text);
          }
        );
      });
    }
  });
</script>

<Layout metadata={metadata}>
  <!-- HeroText Widget ******************* -->

  <HeroText tagline="Contact" title="Let's Connect!" />

  <ContactUs
    id="form"
    title="Drop us a message today!"
    subtitle="Let us know whether you would like to join the club or if you have any questions."
    inputs={[
      {
        type: "text",
        name: "name",
        label: "Name",
      },
      {
        type: "email",
        name: "email",
        label: "Email",
      },
    ]}
    textarea={{
      label: "Message",
    }}
    disclaimer={{
      label:
        "By submitting this contact form, you acknowledge and agree to the collection of your personal information.",
    }}
    description="Our team typically responds within 24 business hours."
  />
</Layout>
